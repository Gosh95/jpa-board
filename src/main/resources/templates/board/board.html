<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/fragments/fragmentHeader :: header (~{::title})}">
  <title th:text="#{board.title}"></title>
</head>
<body>
<nav th:replace="~{/fragments/fragmentNavigator :: nav}" />

<main class="container">
  <div th:replace="~{/fragments/fragmentTitle :: title (|#{post.main.title}|)}"></div>
  <div class="d-flex justify-content-between mb-3">
    <div th:with="prev=${board.id - 1}" th:classappend="${prev == 0} ? 'hidden'">
      <button class="btn btn-dark" th:onclick="|location.href='@{/boards/{boardId} (boardId = ${prev})}'|">
        <span th:text="#{prev.board}"></span>
      </button>
    </div>
    <div th:with="next=${board.id + 1}" th:classappend="${next == totalSize + 1} ? 'hidden'">
      <button class="btn btn-dark" th:onclick="|location.href='@{/boards/{boardId} (boardId = ${next})}'|">
        <span th:text="#{next.board}"></span>
      </button>
    </div>
  </div>
  <div class="form-floating mb-3">
    <div class="form-control" th:text="${board.title}"></div>
  </div>

  <div class="form-floating">
    <div class="form-control" th:text="${board.content}" style="height: 250px"></div>
  </div>

  <div class="space"></div>

  <div class="form-floating">
    <textarea class="form-control" th:placeholder="#{comment}" id="floatingTextarea"></textarea>
    <label for="floatingTextarea" th:text="#{comment}">comment</label>
  </div>

  <div class="write-btn">
    <button th:onclick="|location.href='@{/boards/{boardId}/edit (boardId =${board.id})}'|" type="button" class="btn btn-dark btn-edit">
      <span th:text="#{edit.button}">edit</span>
    </button>
    <button type="button" class="btn btn-dark btn-delete">
      <span th:text="#{delete.button}">delete</span>
    </button>
  </div>
</main>

<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
-->
<!--"'javascript:cancel('+${order.id}+')'"-->
<script th:inline="javascript">
  const deleteBtn = document.querySelector(".btn-delete");
  const boardId = [[${board.id}]];

  deleteBtn.addEventListener("click", (e) => {
    const answer = confirm("정말로 삭제하시겠습니까");

    if(answer === true) {
      const form = document.createElement('form');
      form.setAttribute('action', `/boards/${boardId}/delete`)
      form.setAttribute('method', 'post');

      document.body.append(form);

      form.submit();
    }
  });
</script>
</body>
</html>